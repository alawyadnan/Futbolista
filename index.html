<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>Futbolista</title>
  <link rel="manifest" href="manifest.json" />
<link rel="stylesheet" href="styles.css?v=102" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">⚽</div>
      <div>
        <div class="title">Futbolista</div>
        <div class="subtitle" id="subtitle"></div>
      </div>
    </div>
    <button class="ghost" id="btnExport" title="Export backup">Export</button>
  </header>

  <main class="app" id="app">
    <!-- DASHBOARD -->
    <section class="screen" id="screen-dashboard" data-screen>
      <div class="grid">
        <div class="card">
          <div class="card-title">Top Scorers (Top 3)</div>
          <div class="list" id="topScorers"></div>
        </div>

        <div class="card">
          <div class="card-title">Best Current Streak (Top 3)</div>
          <div class="list" id="topStreaks"></div>
        </div>

        <div class="card">
          <div class="card-title">Best Win % (Top 3)</div>
          <div class="note" style="margin-top:-6px">Minimum 2 matches</div>
          <div class="list" id="topWinPct"></div>
        </div>

        <div class="card wide">
          <div class="card-h">
            <div>
              <div class="kpi-label">Players</div>
              <div class="kpi" id="kpiPlayers">0</div>
            </div>
            <div>
              <div class="kpi-label">Total Match Entries</div>
              <div class="kpi" id="kpiLogs">0</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- LEADERBOARD (Cards) -->
    <section class="screen hidden" id="screen-leaderboard" data-screen>
      <div class="card wide">
        <div class="card-title">Leaderboard Settings</div>
        <div class="row">
          <div class="grow">
            <label class="label">Sort by</label>
            <select id="sortBy" class="select">
              <option value="winpct" selected>Win %</option>
              <option value="goals">Goals</option>
              <option value="gpm">Goals per Match</option>
              <option value="wins">Wins</option>
              <option value="matches">Matches</option>
              <option value="currentStreak">Current Win Streak</option>
              <option value="bestStreak">Best Win Streak</option>
            </select>
          </div>
        </div>
      </div>

      <div class="card wide">
        <div class="card-title">Leaderboard</div>
        <div class="list" id="leaderCards"></div>
      </div>
    </section>

    <!-- TABLE (All players as table) -->
    <section class="screen hidden" id="screen-table" data-screen>
      <div class="card wide">
        <div class="card-title">All Players (Table)</div>
        <div class="row">
          <div class="grow">
            <label class="label">Sort by</label>
            <select id="tableSortBy" class="select">
              <option value="winpct" selected>Win %</option>
              <option value="goals">Goals</option>
              <option value="gpm">Goals per Match</option>
              <option value="wins">Wins</option>
              <option value="matches">Matches</option>
              <option value="currentStreak">Current Win Streak</option>
            </select>
          </div>
        </div>

        <div class="table-wrap">
          <table class="table" id="playersTable">
            <thead>
              <tr>
                <th>#</th>
                <th>Name</th>
                <th>Matches</th>
                <th>Wins</th>
                <th>Goals</th>
                <th>Win %</th>
                <th>Goals/Match</th>
                <th>Current Streak</th>
                <th>Best Streak</th>
              </tr>
            </thead>
            <tbody id="playersTableBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- PLAYERS -->
    <section class="screen hidden" id="screen-players" data-screen>
      <div class="card wide">
        <div class="card-title">Add Player</div>
        <div class="row">
          <div class="grow">
            <label class="label">Player name</label>
            <input id="playerName" class="input" placeholder="e.g., Ahmed" maxlength="40" />
          </div>
          <button id="btnAddPlayer" class="btn">Add</button>
        </div>
      </div>

      <div class="card wide">
        <div class="card-title">Players</div>
        <div class="list" id="playersList"></div>
      </div>
    </section>

    <!-- MATCHES -->
    <section class="screen hidden" id="screen-matches" data-screen>
      <div class="card wide">
        <div class="card-title">Add Match Entry (per player)</div>

        <div class="row">
          <div class="grow">
            <label class="label">Date</label>
            <input id="logDate" class="input" type="date" />
          </div>
          <div class="grow">
            <label class="label">Player</label>
            <select id="logPlayer" class="select"></select>
          </div>
        </div>

        <div class="row">
          <div class="grow">
            <label class="label">Goals</label>
            <input id="logGoals" class="input" type="number" min="0" value="0" />
          </div>
          <div class="grow">
            <label class="label">Result</label>
            <select id="logWin" class="select">
              <option value="win">Win</option>
              <option value="loss">Loss</option>
            </select>
          </div>
          <button id="btnAddLog" class="btn">Add Entry</button>
        </div>

        <div class="note">
          Streak rule: Loss → streak = 0. Win → streak +1 automatically.
        </div>
      </div>

      <div class="card wide">
        <div class="card-title">Recent Entries</div>
        <div class="list" id="logsList"></div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="screen hidden" id="screen-settings" data-screen>
      <div class="card wide">
        <div class="card-title">Backup / Restore</div>
        <div class="row">
          <button class="btn" id="btnExport2">Export JSON</button>
          <label class="btn secondary" for="importFile">Import JSON</label>
          <input id="importFile" type="file" accept="application/json" style="display:none" />
        </div>
        <div class="note">Use Export/Import to move data to another device.</div>
      </div>

      <div class="card wide danger">
        <div class="card-title">Danger Zone</div>
        <button class="btn danger" id="btnReset">Reset all data</button>
      </div>
    </section>
  </main>

  <nav class="bottomnav">
    <button class="navbtn active" data-nav="dashboard">Dashboard</button>
    <button class="navbtn" data-nav="leaderboard">Leaderboard</button>
    <button class="navbtn" data-nav="table">Table</button>
    <button class="navbtn" data-nav="players">Players</button>
    <button class="navbtn" data-nav="matches">Matches</button>
    <button class="navbtn" data-nav="settings">Settings</button>
  </nav>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>
</html>
