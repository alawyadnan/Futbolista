<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b1220" />
  <title>Sunday League Pro</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">⚽</div>
      <div>
        <div class="title">Sunday League Pro</div>
        <div class="subtitle" id="subtitle">Offline-friendly stats tracker</div>
      </div>
    </div>
    <button class="ghost" id="btnExport" title="Export backup">Export</button>
  </header>

  <main class="app" id="app">
    <!-- DASHBOARD -->
    <section class="screen" id="screen-dashboard" data-screen>
      <div class="grid">
        <div class="card">
          <div class="card-h">
            <div>
              <div class="kpi-label">Players</div>
              <div class="kpi" id="kpiPlayers">0</div>
            </div>
            <div>
              <div class="kpi-label">Total Matches Logged</div>
              <div class="kpi" id="kpiLogs">0</div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-title">Top Scorers</div>
          <div class="list" id="topScorers"></div>
        </div>

        <div class="card">
          <div class="card-title">Best Current Streak</div>
          <div class="list" id="topStreaks"></div>
        </div>
      </div>

      <div class="hint">
        Tip: Add this site to iPhone Home Screen (Safari → Share → Add to Home Screen).
      </div>
    </section>

    <!-- LEADERBOARD -->
    <section class="screen hidden" id="screen-leaderboard" data-screen>
      <div class="row">
        <div class="grow">
          <label class="label">Sort by</label>
          <select id="sortBy" class="select">
            <option value="points">Points (Goals)</option>
            <option value="goals">Goals</option>
            <option value="winpct">Win %</option>
            <option value="wins">Wins</option>
            <option value="currentStreak">Current Win Streak</option>
            <option value="bestStreak">Best Win Streak</option>
            <option value="matches">Matches</option>
          </select>
        </div>
        <div>
          <label class="label">Min matches</label>
          <input id="minMatches" class="input" type="number" min="0" value="0" />
        </div>
      </div>

  <div class="card wide">
    <div class="card-title">Leaderboard</div>
    <div class="list" id="leaderCards"></div>
  </div>
      
    </section>

    <!-- PLAYERS -->
    <section class="screen hidden" id="screen-players" data-screen>
      <div class="row">
        <div class="grow">
          <label class="label">Add player</label>
          <input id="playerName" class="input" placeholder="e.g., Ahmed" maxlength="40" />
        </div>
        <button id="btnAddPlayer" class="btn">Add</button>
      </div>

      <div class="card">
        <div class="card-title">Players</div>
        <div class="list" id="playersList"></div>
      </div>
    </section>

    <!-- MATCHES -->
    <section class="screen hidden" id="screen-matches" data-screen>
      <div class="card">
        <div class="card-title">Add Match Entry (per player)</div>

        <div class="row">
          <div class="grow">
            <label class="label">Date</label>
            <input id="logDate" class="input" type="date" />
          </div>
          <div class="grow">
            <label class="label">Player</label>
            <select id="logPlayer" class="select"></select>
          </div>
        </div>

        <div class="row">
          <div class="grow">
            <label class="label">Goals</label>
            <input id="logGoals" class="input" type="number" min="0" value="0" />
          </div>
          <div class="grow">
            <label class="label">Result</label>
            <select id="logWin" class="select">
              <option value="win">Win</option>
              <option value="loss">Loss</option>
            </select>
          </div>
          <button id="btnAddLog" class="btn">Add Entry</button>
        </div>

        <div class="note">
          Streak rule: If player loses → streak becomes 0. If wins → streak increases by 1.
        </div>
      </div>

      <div class="card">
        <div class="card-title">Recent Entries</div>
        <div class="list" id="logsList"></div>
      </div>
    </section>

    <!-- SETTINGS -->
    <section class="screen hidden" id="screen-settings" data-screen>
      <div class="card">
        <div class="card-title">Backup / Restore</div>
        <div class="row">
          <button class="btn" id="btnExport2">Export JSON</button>
          <label class="btn secondary" for="importFile">Import JSON</label>
          <input id="importFile" type="file" accept="application/json" style="display:none" />
        </div>
        <div class="note">
          Export/Import helps you move data between devices.
        </div>
      </div>

      <div class="card danger">
        <div class="card-title">Danger Zone</div>
        <button class="btn danger" id="btnReset">Reset all data</button>
      </div>
    </section>
  </main>

  <nav class="bottomnav">
    <button class="navbtn active" data-nav="dashboard">Dashboard</button>
    <button class="navbtn" data-nav="leaderboard">Leaderboard</button>
    <button class="navbtn" data-nav="players">Players</button>
    <button class="navbtn" data-nav="matches">Matches</button>
    <button class="navbtn" data-nav="settings">Settings</button>
  </nav>

  <script src="app.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>
</html>
